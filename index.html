<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Stats - App ComplÃ¨te</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <h1>âš½ Football Stats</h1>
            <div class="nav-menu">
                <button class="nav-btn" onclick="showPage('setup')">âš™ï¸ Configuration</button>
                <button class="nav-btn" onclick="showPage('lineup')">ğŸ‘¥ Composition</button>
                <button class="nav-btn" onclick="showPage('match')">ğŸŸï¸ Match</button>
                <button class="nav-btn" onclick="showPage('stats')">ğŸ“Š Statistiques</button>
                <button class="nav-btn" onclick="showPage('live')">ğŸ“¡ Live</button>
            </div>
        </div>
    </nav>

    <!-- Page Configuration -->
    <div id="setup" class="page active">
        <div class="page-container">
            <h2>âš™ï¸ Configuration des Ã‰quipes</h2>
            
            <div class="team-card">
                <h3>ğŸ‘¥ Composition de votre Ã©quipe</h3>
                <div class="form-group">
                    <label for="playerName">Nom de la joueuse:</label>
                    <input type="text" id="playerName" placeholder="Entrez le nom">
                </div>
                <div class="form-group">
                    <label for="playerPosition">Position:</label>
                    <select id="playerPosition">
                        <option value="gardienne">ğŸ¥… Gardienne</option>
                        <option value="defenseure">ğŸ›¡ï¸ DÃ©fenseure</option>
                        <option value="milieu">âš¡ Milieu</option>
                        <option value="attaquante">âš½ Attaquante</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="addPlayer()">â• Ajouter Joueuse</button>
                
                <div class="players-list" id="playersList">
                    <!-- Les joueuses seront affichÃ©es ici -->
                </div>
            </div>

            <div class="team-card">
                <h3>ğŸ’¾ Gestion des Compositions</h3>
                <div class="form-group">
                    <label for="compositionName">Nom de la composition:</label>
                    <input type="text" id="compositionName" placeholder="Ex: Ã‰quipe Titulaire">
                </div>
                <button class="btn btn-primary" onclick="saveComposition()">ğŸ’¾ Sauvegarder Composition</button>
                <button class="btn btn-secondary" onclick="loadComposition()">ğŸ“‚ Charger Composition</button>
                <select id="compositionsList" style="width: 100%; margin: 10px 0;"></select>
            </div>

            <div class="team-card">
                <h3>âš™ï¸ ParamÃ¨tres du Match</h3>
                <div class="form-group">
                    <label for="team1Name">Nom de votre Ã©quipe:</label>
                    <input type="text" id="team1Name" value="Mon Ã‰quipe">
                </div>
                <div class="form-group">
                    <label for="team2Name">Ã‰quipe adverse:</label>
                    <input type="text" id="team2Name" value="Ã‰quipe Adverse">
                </div>
                <div class="form-group">
                    <label for="venue">Lieu:</label>
                    <input type="text" id="venue" value="Terrain">
                </div>
                <div class="form-group">
                    <label for="duration">DurÃ©e mi-temps (minutes):</label>
                    <input type="number" id="duration" value="45" min="1" max="90">
                </div>
            </div>
            
            <div class="team-card">
                <h2>ğŸ® Actions Rapides</h2>
                <button class="btn btn-primary" onclick="startNewMatch()" style="width: 100%; margin: 10px 0;">
                    ğŸ†• Nouveau Match
                </button>
                <button class="btn btn-secondary" onclick="showConfirmReset()" style="width: 100%; margin: 10px 0;">
                    ğŸ”„ Reset Complet
                </button>
            </div>
        </div>
    </div>

    <!-- Page Composition d'Ã©quipe -->
    <div id="lineup" class="page">
        <div class="page-container">
            <h2>ğŸ‘¥ Composition de l'Ã‰quipe</h2>
            
            <div class="team-card">
                <h3>ğŸŸï¸ SÃ©lectionner votre 11 de dÃ©part</h3>
                <p style="margin-bottom: 20px;">Cliquez sur les joueuses pour les sÃ©lectionner comme titulaires (maximum 11)</p>
                
                <div class="players-grid" id="lineupPlayersList">
                    <!-- Les joueuses seront affichÃ©es ici -->
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-primary" onclick="saveLineup()">ğŸ’¾ Confirmer la Composition</button>
                    <button class="btn btn-secondary" onclick="clearLineup()">ğŸ”„ Effacer la SÃ©lection</button>
                </div>
                
                <div id="lineupSummary" style="margin-top: 20px; display: none;">
                    <h4>ğŸ“‹ Composition ConfirmÃ©e:</h4>
                    <div id="lineupDisplay"></div>
                </div>
            </div>

            <!-- Terrain de football visuel -->
            <div class="team-card">
                <h3>ğŸŸï¸ Terrain</h3>
                <div class="field-container">
                    <div class="field-section">
                        <h4>Sur le terrain</h4>
                        <div id="fieldPlayers" class="field-players">
                            <!-- Joueurs sur le terrain -->
                        </div>
                    </div>
                    <div class="field-section">
                        <h4>Banc de touche</h4>
                        <div id="benchPlayers" class="bench-players">
                            <!-- Joueurs sur le banc -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Page Match -->
    <div id="match" class="page">
        <div class="page-container">
            <div class="match-header">
                <div class="teams-display">
                    <div class="team team1">
                        <h3 id="team1Display">Mon Ã‰quipe</h3>
                        <div class="score" id="team1Score">0</div>
                    </div>
                    <div class="timer-section">
                        <div class="timer" id="timer">00:00</div>
                        <div class="timer-controls">
                            <button class="btn btn-small" onclick="toggleTimer()">â–¶ï¸</button>
                            <button class="btn btn-small" onclick="showHalfTimeConfirm()">ğŸ”„ Mi-temps</button>
                            <button class="btn btn-small" onclick="resetTimer()">â¹ï¸</button>
                        </div>
                    </div>
                    <div class="team team2">
                        <h3 id="team2Display">Ã‰quipe Adverse</h3>
                        <div class="score" id="team2Score">0</div>
                    </div>
                </div>
            </div>

            <!-- Actions du Match - 2 boutons par ligne -->
            <div class="actions-grid">
                <div class="action-card" onclick="showActionChoiceModal('goal')">
                    <div class="action-icon">âš½</div>
                    <div>But</div>
                </div>
                <div class="action-card" onclick="showActionChoiceModal('shot_on')">
                    <div class="action-icon">ğŸ¯</div>
                    <div>Tir CadrÃ©</div>
                </div>
                
                <div class="action-card" onclick="showActionChoiceModal('shot_off')">
                    <div class="action-icon">ğŸ“</div>
                    <div>Tir Non CadrÃ©</div>
                </div>
                <div class="action-card" onclick="showActionChoiceModal('card')">
                    <div class="action-icon">ğŸŸ¨</div>
                    <div>Carton</div>
                </div>
                
                <div class="action-card" onclick="showSaveModal()">
                    <div class="action-icon">ğŸ§¤</div>
                    <div>ArrÃªt Gardienne</div>
                </div>
                <div class="action-card" onclick="showActionChoiceModal('foul')">
                    <div class="action-icon">âš ï¸</div>
                    <div>Faute</div>
                </div>
                
                <div class="action-card" onclick="showFreeKickModal()">
                    <div class="action-icon">âš½</div>
                    <div>Coup Franc</div>
                </div>
                <div class="action-card" onclick="showSubstitutionModal()">
                    <div class="action-icon">ğŸ”„</div>
                    <div>Changement</div>
                </div>
            </div>

            <!-- Timeline des Ã©vÃ©nements -->
            <div class="timeline" id="timeline">
                <!-- Les Ã©vÃ©nements seront affichÃ©s ici -->
            </div>

            <!-- Lien Live -->
            <div class="live-section">
                <button class="btn btn-primary" onclick="generateLiveLink()">ğŸ“¡ GÃ©nÃ©rer Lien Live</button>
                <input type="text" id="liveLink" placeholder="Le lien live apparaÃ®tra ici..." readonly style="display: none;">
                <button id="copyLinkBtn" class="btn btn-small" onclick="copyLiveLink()" style="display: none;">ğŸ“‹ Copier</button>
            </div>
        </div>
    </div>

    <!-- Page Statistiques -->
    <div id="stats" class="page">
        <div class="page-container">
            <h2>ğŸ“Š Statistiques du Match</h2>
            <div class="stats-grid" id="statsGrid">
                <!-- Les statistiques seront affichÃ©es ici -->
            </div>
            
            <div class="team-card">
                <h3>ğŸ‘¥ Statistiques Individuelles</h3>
                <div id="playerStatsGrid">
                    <!-- Stats des joueuses -->
                </div>
            </div>
        </div>
    </div>

    <!-- Page Live -->
    <div id="live" class="page">
        <div class="page-container">
            <h2>ğŸ“¡ Suivi Live</h2>
            <div id="liveContent">
                <div id="waitingMessage" class="waiting-message">
                    <h3>En attente de donnÃ©es...</h3>
                    <p>Le match n'a pas encore commencÃ© ou aucun Ã©vÃ©nement n'a Ã©tÃ© enregistrÃ©.</p>
                </div>
                <div id="liveMatch" style="display: none;">
                    <div class="live-teams">
                        <div class="team">
                            <h3 id="liveTeam1">Ã‰quipe 1</h3>
                            <div class="score" id="liveScore1">0</div>
                        </div>
                        <div class="timer">
                            <div id="liveTimer">00:00</div>
                        </div>
                        <div class="team">
                            <h3 id="liveTeam2">Ã‰quipe 2</h3>
                            <div class="score" id="liveScore2">0</div>
                        </div>
                    </div>
                    <div class="live-events" id="liveEvents">
                        <!-- Ã‰vÃ©nements live -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Choix Action -->
    <div id="actionChoiceModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('actionChoiceModal')">&times;</span>
            <h3 id="actionChoiceTitle">Choisir l'Ã©quipe</h3>
            <div class="choice-buttons">
                <button class="choice-btn team-choice" onclick="selectTeamForAction('team')">
                    <span id="teamChoiceText">Mon Ã‰quipe</span>
                </button>
                <button class="choice-btn opponent-choice" onclick="selectTeamForAction('opponent')">
                    <span>Ã‰quipe Adverse</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Action -->
    <div id="actionModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('actionModal')">&times;</span>
            <h3 id="actionModalTitle">Action</h3>
            
            <!-- Choix carton pour les cartons -->
            <div id="cardButtons" class="card-buttons" style="display: none;">
                <button class="card-btn yellow-card" onclick="selectCardType('yellow')">ğŸŸ¨ Jaune</button>
                <button class="card-btn red-card" onclick="selectCardType('red')">ğŸŸ¥ Rouge</button>
                <button class="card-btn white-card" onclick="selectCardType('white')">â¬œ Blanc</button>
            </div>
            
            <!-- SÃ©lection joueur -->
            <div class="players-grid" id="actionPlayerButtons">
                <!-- Boutons joueurs -->
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="saveActionBtn" class="btn btn-primary" onclick="saveAction()" disabled>
                    âœ… Valider
                </button>
                <button class="btn btn-secondary" onclick="closeModal('actionModal')">
                    âŒ Annuler
                </button>
            </div>
        </div>
    </div>

    <!-- Modal ArrÃªt Gardienne -->
    <div id="saveModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('saveModal')">&times;</span>
            <h3>ğŸ§¤ ArrÃªt de la Gardienne</h3>
            
            <div class="players-grid" id="savePlayerButtons">
                <!-- Boutons des gardiennes -->
            </div>
            
            <div class="form-group">
                <label>Type d'arrÃªt:</label>
                <select id="saveType">
                    <option value="line">Sur sa ligne</option>
                    <option value="out">En sortie</option>
                </select>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="saveSaveBtn" class="btn btn-primary" onclick="saveGoalkeeperSave()" disabled>ğŸ’¾ Enregistrer</button>
                <button class="btn btn-secondary" onclick="closeModal('saveModal')">âŒ Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal Coup Franc -->
    <div id="freeKickModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('freeKickModal')">&times;</span>
            <h3>âš½ Coup de Pied ArrÃªtÃ©</h3>
            
            <div class="players-grid" id="freeKickPlayerButtons">
                <!-- Boutons des joueuses -->
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="saveFreeKickBtn" class="btn btn-primary" onclick="saveFreeKick()" disabled>ğŸ’¾ Enregistrer</button>
                <button class="btn btn-secondary" onclick="closeModal('freeKickModal')">âŒ Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal Changement -->
    <div id="substitutionModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('substitutionModal')">&times;</span>
            <h3>ğŸ”„ Changement de Joueuse</h3>
            
            <div class="substitution-container">
                <div class="substitution-section">
                    <h4>Sortante (sur le terrain)</h4>
                    <div class="players-grid" id="outPlayerButtons">
                        <!-- Joueurs sur le terrain -->
                    </div>
                </div>
                
                <div class="substitution-section">
                    <h4>Entrante (sur le banc)</h4>
                    <div class="players-grid" id="inPlayerButtons">
                        <!-- Joueurs sur le banc -->
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="saveSubstitutionBtn" class="btn btn-primary" onclick="saveSubstitution()" disabled>ğŸ’¾ Effectuer le Changement</button>
                <button class="btn btn-secondary" onclick="closeModal('substitutionModal')">âŒ Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal Confirmation Mi-temps -->
    <div id="confirmHalfTimeModal" class="modal">
        <div class="modal-content">
            <h3>ğŸ”„ Confirmer la Mi-temps</h3>
            <p>Passer Ã  la seconde mi-temps ? Le timer sera remis Ã  zÃ©ro.</p>
            <div style="text-align: center;">
                <button class="btn btn-primary" onclick="confirmHalfTime()">âœ… Oui, Mi-temps</button>
                <button class="btn btn-secondary" onclick="closeModal('confirmHalfTimeModal')">âŒ Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal Confirmation Reset -->
    <div id="confirmResetModal" class="modal">
        <div class="modal-content">
            <h3>ğŸ”„ Confirmer la rÃ©initialisation</h3>
            <p>ÃŠtes-vous sÃ»r de vouloir tout rÃ©initialiser ? Cette action est irrÃ©versible.</p>
            <div style="text-align: center;">
                <button class="btn btn-primary" onclick="confirmReset()">âœ… Oui, rÃ©initialiser</button>
                <button class="btn btn-secondary" onclick="closeModal('confirmResetModal')">âŒ Annuler</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/api.js"></script>
    <script src="js/match-actions.js"></script>
    <script src="js/lineup.js"></script>
    
    <script>
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });
    </script>
</body>
</html>